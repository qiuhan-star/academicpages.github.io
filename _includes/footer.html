{% include base_path %}

{% if site.author.github or site.author.bitbucket or site.atom_feed.hide != true %}
<div class="page__footer-follow">
  <ul class="social-icons">
    {% if site.data.ui-text[site.locale].follow_label %}
      <li><strong>{{ site.data.ui-text[site.locale].follow_label }}</strong></li>
    {% endif %}
    {% if site.author.github %}
      <li><a href="http://github.com/{{ site.author.github }}"><i class="fab fa-github" aria-hidden="true"></i> GitHub</a></li>
    {% endif %}
    {% if site.author.bitbucket %}
      <li><a href="http://bitbucket.org/{{ site.author.bitbucket }}"><i class="fab fa-bitbucket" aria-hidden="true"></i> Bitbucket</a></li>
    {% endif %}
    {% if site.atom_feed.hide != true %}
    <li><a href="{% if site.atom_feed.path %}{{ site.atom_feed.path }}{% else %}{{ base_path }}/feed.xml{% endif %}"><i class="fa fa-fw fa-rss-square" aria-hidden="true"></i> {{ site.data.ui-text[site.locale].feed_label | default: "Feed" }}</a></li>
    {% endif %}
  </ul>
</div>
{% endif %}

<div class="page__footer-copyright">
  &copy; {{ site.time | date: '%Y' }} {{ site.name | default: site.title }},
  {{ site.data.ui-text[site.locale].powered_by | default: "Powered by" }}
  <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> &
  <a href="https://github.com/academicpages/academicpages.github.io">AcademicPages</a>.<br />
  Last updated {{ "now" | date: '%Y-%m-%d' }}.
  Visitor Count: <span id="visitor-count">{{ site.data.visit_count }}</span>,
  Total Page Views: <span id="page-view-count">{{ site.data.page_view_count }}</span>,
  Contact me at <a href="mailto:rachel.hanqiu@gmail.com">rachel.hanqiu@gmail.com</a>
</div>

document.addEventListener('DOMContentLoaded', function() {
  // 发送请求到服务器获取计数
  fetch('/update-counts', { // 确保 URL 与您的服务器端点匹配
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({ type: 'visit' }) // 假设每次页面加载都是一次访问
  })
  .then(response => {
    if (!response.ok) {
      throw new Error('Network response was not ok');
    }
    return response.json();
  })
  .then(data => {
    // 更新页面上的计数
    document.getElementById('visitor-count').textContent = data.visitCount;
    document.getElementById('page-view-count').textContent = data.pageViewCount;
  })
  .catch(error => console.error('Error updating counts:', error));
});

<div class="runtime" style="font-size: 14px;">
  Blog up for
  {% assign start_date = "2024-12-13T00:00:00+00:00" %}
  {% assign current_time = site.time | date: "%s" %}
  {% assign start_timestamp = start_date | date: "%s" %}
  {% assign duration = current_time | minus: start_timestamp %}
  {% assign days = duration | divided_by: 86400 %}
  {% assign hours = duration | divided_by: 3600 | modulo: 24 %}
  {% assign minutes = duration | divided_by: 60 | modulo: 60 %}
  {% assign seconds = duration | modulo: 60 %}

  {{ days }} days,
  {{ hours }} hrs,
  {{ minutes }} Min,
  {{ seconds }} Sec
</div>
</footer>

